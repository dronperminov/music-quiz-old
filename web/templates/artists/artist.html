{% include "header.html" %}
<title>Исполнитель "{{artist.name}}" | music-quiz</title>
<link rel="stylesheet" type="text/css" href="/styles/player.css?v={{version}}">
<link rel="stylesheet" type="text/css" href="/styles/audio.css?v={{version}}">
<link rel="stylesheet" type="text/css" href="/styles/audios.css?v={{version}}">
<link rel="stylesheet" type="text/css" href="/styles/artists.css?v={{version}}">
</head>
<body>
    {% include "menu.html" %}
    <h1 class="top">Исполнитель {{artist.name}}</h1>

    <div class="content">
        {% if user.role == "admin" %}
        <div class="right">
            <svg id="artist-question-{{artist.id}}" class="artist-question-icon {% if artist.id in user.settings.artists %}artist-question-selected-icon{% endif %}" onclick="SwitchArtistQuestion({{artist.id}})" height="16px" width="16px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path d="M396.138,85.295c-13.172-25.037-33.795-45.898-59.342-61.03C311.26,9.2,280.435,0.001,246.98,0.001
                    c-41.238-0.102-75.5,10.642-101.359,25.521c-25.962,14.826-37.156,32.088-37.156,32.088c-4.363,3.786-6.824,9.294-6.721,15.056
                    c0.118,5.77,2.775,11.186,7.273,14.784l35.933,28.78c7.324,5.864,17.806,5.644,24.875-0.518c0,0,4.414-7.978,18.247-15.88
                    c13.91-7.85,31.945-14.173,58.908-14.258c23.517-0.051,44.022,8.725,58.016,20.717c6.952,5.941,12.145,12.594,15.328,18.68
                    c3.208,6.136,4.379,11.5,4.363,15.574c-0.068,13.766-2.742,22.77-6.603,30.442c-2.945,5.729-6.789,10.813-11.738,15.744
                    c-7.384,7.384-17.398,14.207-28.634,20.479c-11.245,6.348-23.365,11.932-35.612,18.68c-13.978,7.74-28.77,18.858-39.701,35.544
                    c-5.449,8.249-9.71,17.686-12.416,27.641c-2.742,9.964-3.98,20.412-3.98,31.071c0,11.372,0,20.708,0,20.708
                    c0,10.719,8.69,19.41,19.41,19.41h46.762c10.719,0,19.41-8.691,19.41-19.41c0,0,0-9.336,0-20.708c0-4.107,0.467-6.755,0.917-8.436
                    c0.773-2.512,1.206-3.14,2.47-4.668c1.29-1.452,3.895-3.674,8.698-6.331c7.019-3.946,18.298-9.276,31.07-16.176
                    c19.121-10.456,42.367-24.646,61.972-48.062c9.752-11.686,18.374-25.758,24.323-41.968c6.001-16.21,9.242-34.431,9.226-53.96
                    C410.243,120.761,404.879,101.971,396.138,85.295z"/>
                <path d="M228.809,406.44c-29.152,0-52.788,23.644-52.788,52.788c0,29.136,23.637,52.772,52.788,52.772
                    c29.136,0,52.763-23.636,52.763-52.772C281.572,430.084,257.945,406.44,228.809,406.44z"/>
            </svg>
        </div>
        <div class="error" id="error-{{artist.id}}"></div>
        <div class="bottom-margin"></div>

        <div class="form-row">
            <div class="form-row-icon form-row-top-icon" id="creation-icon">
                <svg class="form-svg-stroke-icon" width="24px" height="24px" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg" stroke-width="2" fill="none">
                    <circle cx="12" cy="12" r="10"/>
                    <path stroke-linecap="round" d="M12,22 C14.6666667,19.5757576 16,16.2424242 16,12 C16,7.75757576 14.6666667,4.42424242 12,2 C9.33333333,4.42424242 8,7.75757576 8,12 C8,16.2424242 9.33333333,19.5757576 12,22 Z"/>
                    <path stroke-linecap="round" d="M2.5 9L21.5 9M2.5 15L21.5 15"/>
                </svg>
            </div>
            <div class="form-row-input">
                <div class="basic-multi-select default-multi-select" id="creation">
                    <div class="multi-select-title">Творчество</div>
                    <div class="multi-select-row">
                        <label><input type="checkbox" id="creation-russian" {% if "russian" in artist.creation %}checked{% endif %} onchange="ChangeField('creation')"> русское</label>
                    </div>
                    <div class="multi-select-row">
                        <label><input type="checkbox" id="creation-foreign" {% if "foreign" in artist.creation %}checked{% endif %} onchange="ChangeField('creation')"> зарубежное</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-row-icon form-row-top-icon" id="genres-icon">
                <svg class="form-svg-fill-icon" width="24px" height="24px" viewBox="-3 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="m18.07.169c-.148-.106-.333-.169-.532-.169-.111 0-.217.02-.316.055l.006-.002-11.077 3.938c-.361.131-.613.471-.613.869v.001 2.193.042 10.604c-.534-.295-1.169
                    -.469-1.846-.471h-.001c-.043-.002-.093-.003-.143-.003-1.904 0-3.458 1.497-3.549 3.379v.008c.091 1.89 1.645 3.388 3.549 3.388.05 0 .1-.001.15-.003h-.007c.043.002.093
                    .003.143.003 1.904 0 3.458-1.497 3.549-3.379v-.008-12.883l9.23-3.223v8.973c-.534-.294-1.17-.468-1.846-.47h-.001c-.043-.002-.094-.003-.144-.003-1.904 0-3.457 1.498-3.547
                    3.379v.008c.09 1.89 1.644 3.388 3.548 3.388.051 0 .101-.001.151-.003h-.007c.031.001.068.002.105.002 1.696 0 3.12-1.166 3.513-2.74l.005-.025c.042-.101.068-.217.069-.34v
                    -15.754c0-.31-.153-.585-.388-.752l-.003-.002z"/>
                </svg>
            </div>
            <div class="form-row-input">
                <div class="basic-multi-select default-multi-select" id="genres">
                    <div class="multi-select-title">Жанры</div>
                    {% for genre in genres %}
                    <div class="multi-select-row">
                        <label><input type="checkbox" id="genres-{{genre}}" {% if genre in artist.genres %}checked{% endif %} onchange="ChangeField('genres')"> {{genre2rus[genre]}}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <button class="basic-button default-button hidden" id="save-btn" onclick="SaveArtist({{artist.id}})">Сохранить</button>
        <div class="error" id="error"></div>
        <div class="bottom-margin"></div>
        {% else %}
        <div class="table-block">
            <div class="table-cell">
                {% if artist.creation %}
                <div class="text"><b>Творчество</b>:
                    {% for creation_type in artist.creation %}{% if loop.index > 1 %}, {% endif %}{{creation2rus[creation_type]}}{% endfor %}
                </div>
                {% endif %}

                {% if artist.genres %}
                <div class="text"><b>Жанры</b>:
                    {% for genre in artist.genres %}{% if loop.index > 1 %}, {% endif %}{{genre2rus[genre]}}{% endfor %}
                </div>
                {% endif %}
            </div>
            <div class="table-cell table-cell-no-width">
                <svg id="artist-question-{{artist.id}}" class="artist-question-icon {% if artist.id in user.settings.artists %}artist-question-selected-icon{% endif %}" onclick="SwitchArtistQuestion({{artist.id}})" height="16px" width="16px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <path d="M396.138,85.295c-13.172-25.037-33.795-45.898-59.342-61.03C311.26,9.2,280.435,0.001,246.98,0.001
                        c-41.238-0.102-75.5,10.642-101.359,25.521c-25.962,14.826-37.156,32.088-37.156,32.088c-4.363,3.786-6.824,9.294-6.721,15.056
                        c0.118,5.77,2.775,11.186,7.273,14.784l35.933,28.78c7.324,5.864,17.806,5.644,24.875-0.518c0,0,4.414-7.978,18.247-15.88
                        c13.91-7.85,31.945-14.173,58.908-14.258c23.517-0.051,44.022,8.725,58.016,20.717c6.952,5.941,12.145,12.594,15.328,18.68
                        c3.208,6.136,4.379,11.5,4.363,15.574c-0.068,13.766-2.742,22.77-6.603,30.442c-2.945,5.729-6.789,10.813-11.738,15.744
                        c-7.384,7.384-17.398,14.207-28.634,20.479c-11.245,6.348-23.365,11.932-35.612,18.68c-13.978,7.74-28.77,18.858-39.701,35.544
                        c-5.449,8.249-9.71,17.686-12.416,27.641c-2.742,9.964-3.98,20.412-3.98,31.071c0,11.372,0,20.708,0,20.708
                        c0,10.719,8.69,19.41,19.41,19.41h46.762c10.719,0,19.41-8.691,19.41-19.41c0,0,0-9.336,0-20.708c0-4.107,0.467-6.755,0.917-8.436
                        c0.773-2.512,1.206-3.14,2.47-4.668c1.29-1.452,3.895-3.674,8.698-6.331c7.019-3.946,18.298-9.276,31.07-16.176
                        c19.121-10.456,42.367-24.646,61.972-48.062c9.752-11.686,18.374-25.758,24.323-41.968c6.001-16.21,9.242-34.431,9.226-53.96
                        C410.243,120.761,404.879,101.971,396.138,85.295z"/>
                    <path d="M228.809,406.44c-29.152,0-52.788,23.644-52.788,52.788c0,29.136,23.637,52.772,52.788,52.772
                        c29.136,0,52.763-23.636,52.763-52.772C281.572,430.084,257.945,406.44,228.809,406.44z"/>
                </svg>
            </div>
            <div class="error" id="error-{{artist.id}}"></div>
        </div>
        {% endif %}

        <h3>Треки</h3>

        {% for audio in audios %}
        <div class="form-row" id="audio-block-{{audio.link}}">
            <div class="table-block table-block-no-spacing">
                <div class="table-cell"></div>

                {% if audio.lyrics %}
                <div class="table-cell table-cell-no-width">
                    <div class="form-row-icon-interactive icons-controls">
                        <svg class="lyrics-icon" id="lyrics-icon-{{audio.link}}" width="20px" height="20px" viewBox="4 4 24 24" xmlns="http://www.w3.org/2000/svg" onclick="ToggleText('{{audio.link}}')">
                            <rect x="4" y="23" width="22" height="2"/>
                            <rect x="4" y="19" width="12" height="2"/>
                            <rect x="4" y="15" width="20" height="2"/>
                            <rect x="4" y="11" width="24" height="2"/>
                            <rect x="4" y="7" width="16" height="2"/>
                        </svg>
                    </div>
                </div>
                {% endif %}

                {% if user.role == "admin" %}
                <div class="table-cell table-cell-no-width">
                    <div class="form-row-icon-interactive icons-controls">
                        <a href="/audios/{{audio.link}}" target="_blank">
                            <svg class="form-svg-fill-icon" width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m3.99 16.854-1.314 3.504a.75.75 0 0 0 .966.965l3.503-1.314a3 3 0 0 0 1.068-.687L18.36 9.175s-.354-1.061-1.414-2.122c-1.06-1.06-2.122-1.414-2.122-1.414L4.677 15.786a3 3 0 0 0-.687 1.068zm12.249-12.63 1.383-1.383c.248-.248.579-.406.925-.348.487.08 1.232.322 1.934 1.025.703.703.945 1.447 1.025 1.934.058.346-.1.677-.348.925L19.774 7.76s-.353-1.06-1.414-2.12c-1.06-1.062-2.121-1.415-2.121-1.415z"/></svg>
                        </a>
                    </div>
                </div>

                <div class="table-cell table-cell-no-width">
                    <div class="form-row-icon-interactive icons-controls">
                        <svg class="form-svg-fill-icon" width="20px" height="20px" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" onclick="RemoveAudio('{{audio.link}}')">
                            <path d="M12 4h3c.6 0 1 .4 1 1v1H3V5c0-.6.5-1 1-1h3c.2-1.1 1.3-2 2.5-2s2.3.9 2.5 2zM8 4h3c-.2-.6-.9-1-1.5-1S8.2 3.4 8 4zM4 7h11l-.9 10.1c0 .5-.5.9-1 .9H5.9c-.5 0-.9-.4-1-.9L4 7z"/>
                        </svg>
                    </div>
                </div>
                {% endif %}
            </div>

            <div class="text">{{audio.artists|map(attribute='name')|join(", ")}} - {{audio.track}}</div>

            <div class="table-block table-block-no-spacing" id="play-audio-{{audio.link}}">
                <div class="table-cell table-cell-no-width table-cell-middle center">
                    <div class="form-row-icon-interactive" onclick="PlayAudio('{{audio.link}}')">
                        <svg class="form-svg-fill-icon" width="20px" height="20px" viewBox="-0.3 -0.05 7.1 7.1" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5.495,2.573 L1.501,0.142 C0.832,-0.265 0,0.25 0,1.069 L0,5.931 C0,6.751 0.832,7.264 1.501,6.858 L5.495,4.428 C6.168,4.018 6.168,2.983 5.495,2.573" />
                        </svg>
                    </div>
                </div>
                <div class="table-cell table-cell-middle">
                    <div id="player-{{audio.link}}">
                        <audio id="audio-{{audio.link}}" data-link="{{audio.link}}" preload="metadata"></audio>
                        {% include "components/player.html" %}
                    </div>
                </div>
            </div>

            <div class="error" id="error-{{audio.link}}"></div>

            {% if audio.lyrics %}
            <div class="form-row audio-lyrics hidden" id="lyrics-{{audio.link}}">
                <div class="audio-text">
                    {% for line in audio.lyrics %}
                    <div class="audio-text-line" data-time="{{line.time}}" onclick="SeekPlayer('{{audio.link}}', {{line.time}})">{{line.text}}</div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <script src="/js/utils.js?v={{version}}"></script>
    <script src="/js/audio.js?v={{version}}"></script>
    <script src="/js/audios.js?v={{version}}"></script>
    <script src="/js/player.js?v={{version}}"></script>
    <script src="/js/lyrics.js?v={{version}}"></script>
    <script src="/js/artist.js?v={{version}}"></script>
    <script src="/js/artists.js?v={{version}}"></script>
    <script>
        let players = InitPlayers()
    </script>

    {% include "footer.html" %}
</body>
</html>
